(self.webpackChunk=self.webpackChunk||[]).push([[396],{48:(e,r,t)=>{"use strict";t.d(r,{vX:()=>m,Do:()=>f,_L:()=>h,BS:()=>p,Ei:()=>v,C1:()=>b});var n=t(5166);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return"function"==typeof e}function s(e){return null!==e&&"object"===o(e)&&!Array.isArray(e)}function u(e){return a(e.$validator)?Object.assign({},e):{$validator:e}}var i=function(e){if(e=(0,n.unref)(e),Array.isArray(e))return!!e.length;if(null==e)return!1;if(!1===e)return!0;if(e instanceof Date)return!isNaN(e.getTime());if("object"===o(e)){for(var r in e)return!0;return!1}return!!String(e).length},c=function(e){return e=(0,n.unref)(e),Array.isArray(e)?e.length:"object"===o(e)?Object.keys(e).length:String(e).length};function l(e){return function(r){return r=(0,n.unref)(r),!i(r)||e.test(r)}}n.unref,l(/^[a-zA-Z]*$/),l(/^[a-zA-Z0-9]*$/),l(/^\d*(\.\d+)?$/);function d(e,r){return function(t){return!i(t)||(!/\s/.test(t)||t instanceof Date)&&+(0,n.unref)(e)<=+t&&+(0,n.unref)(r)>=+t}}function m(e,r){return{$validator:d(e,r),$message:function(e){var r=e.$params;return"The value must be between ".concat(r.min," and ").concat(r.max)},$params:{min:e,max:r}}}var f={$validator:l(/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/),$message:"Value is not a valid email address"};function p(e){return{$validator:(r=e,function(e){return!i(e)||c(e)<=(0,n.unref)(r)}),$message:function(e){var r=e.$params;return"The maximum length allowed is ".concat(r.max)},$params:{max:e}};var r}function v(e){return{$validator:(r=e,function(e){return!i(e)||c(e)>=(0,n.unref)(r)}),$message:function(e){var r=e.$params;return"This field should be at least ".concat(r.min," long")},$params:{min:e}};var r}var b={$validator:function(e){return"string"==typeof e&&(e=e.trim()),i(e)},$message:"Value is required"};l(/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i);var h={$validator:l(/(^[0-9]*$)|(^-[0-9]+$)/),$message:"Value is not an integer"};l(/^[-]?\d*(\.\d+)?$/)},3396:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>z});var n=t(5166),o={class:"login"},a=(0,n.createVNode)("h3",{class:"login-title"},"Login",-1),s={class:"form-group"},u=(0,n.createVNode)("label",{for:"userEmail"},"Username/Email",-1),i={key:0,class:"invalid-feedback"},c=(0,n.createVNode)("br",null,null,-1),l={class:"form-group"},d=(0,n.createVNode)("label",{for:"password"},"Password",-1),m={key:0,class:"invalid-feedback"},f=(0,n.createVNode)("br",null,null,-1),p={class:"form-group form-check"},v={class:"form-check-label"},b=(0,n.createTextVNode)("Remember Me "),h=(0,n.createVNode)("div",{class:"valid-feedback"},"Valid.",-1),x=(0,n.createVNode)("div",{class:"invalid-feedback"},"Check this checkbox to continue.",-1),$=(0,n.createVNode)("div",{class:"form-group"},[(0,n.createVNode)("button",{class:"btn btn-danger btn-block"},"Login")],-1);var g=t(7757),y=t.n(g),k=t(2380),w=t(3082),V=t(48);function N(e,r,t,n,o,a,s){try{var u=e[a](s),i=u.value}catch(e){return void t(e)}u.done?r(i):Promise.resolve(i).then(n,o)}const S={setup:function(){return{v$:(0,w.ZP)()}},props:{goBack:{default:!1}},data:function(){return{error:null,message:null,userForm:{userEmail:"",password:""},isSubmitted:!1,rememberMe:!1}},validations:{userForm:{userEmail:{required:V.C1},password:{required:V.C1}}},methods:{handleSubmit:function(){this.isSubmitted=!0,this.v$.$touch(),this.v$.$invalid||this.login()},login:function(){var e,r=this;return(e=y().mark((function e(){var t,n,o;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={email:r.userForm.userEmail,password:r.userForm.password,remember:r.rememberMe},r.error=null,e.prev=2,e.next=5,k.Z.login(t);case 5:return n=e.sent,console.log("Authservice res:"),console.log(n),console.log("\n\n\n\n"),e.next=11,r.$store.dispatch("auth/getAuthUser");case 11:if(!e.sent){e.next=17;break}r.$store.dispatch("auth/setGuest",{value:"isNotGuest"}),r.goRouter(),e.next=20;break;case 17:throw(o=Error("Unable to fetch user after login, check your API settings.")).name="Fetch User",o;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),r.error=e.t0.response.data.errors.email[0],"Invalid email or username."==r.error?r.$notify({type:"error",text:"Your email/username does not exist!"}):"Invalid password."==r.error&&r.$notify({type:"error",text:"Your password is incorrect!"});case 26:case"end":return e.stop()}}),e,null,[[2,22]])})),function(){var r=this,t=arguments;return new Promise((function(n,o){var a=e.apply(r,t);function s(e){N(a,n,o,s,u,"next",e)}function u(e){N(a,n,o,s,u,"throw",e)}s(void 0)}))})()},goRouter:function(){1==this.goBack?(console.log("course-enroll"),this.$router.go(-1)):(console.log("courses"),this.$router.push({name:"Courses"}))}},render:function(e,r,t,g,y,k){return(0,n.openBlock)(),(0,n.createBlock)("div",null,[(0,n.createVNode)("div",o,[a,(0,n.createVNode)("form",{onSubmit:r[4]||(r[4]=(0,n.withModifiers)((function(){return k.handleSubmit&&k.handleSubmit.apply(k,arguments)}),["prevent"])),class:"needs-validation"},[(0,n.createVNode)("div",s,[u,(0,n.withDirectives)((0,n.createVNode)("input",{type:"text","onUpdate:modelValue":r[1]||(r[1]=function(e){return y.userForm.userEmail=e}),id:"userEmail",name:"userEmail",class:["form-control",{"is-invalid":y.isSubmitted&&g.v$.userForm.userEmail.$error}],autocomplete:"username"},null,2),[[n.vModelText,y.userForm.userEmail]]),y.isSubmitted&&g.v$.userForm.userEmail.$error?((0,n.openBlock)(),(0,n.createBlock)("div",i," Please enter your username or email address ")):(0,n.createCommentVNode)("",!0)]),c,(0,n.createVNode)("div",l,[d,(0,n.withDirectives)((0,n.createVNode)("input",{type:"password","onUpdate:modelValue":r[2]||(r[2]=function(e){return y.userForm.password=e}),id:"password",name:"password",class:["form-control",{"is-invalid":y.isSubmitted&&g.v$.userForm.password.$error}],autocomplete:"current-password"},null,2),[[n.vModelText,y.userForm.password]]),y.isSubmitted&&g.v$.userForm.password.$error?((0,n.openBlock)(),(0,n.createBlock)("div",m," Please enter your password ")):(0,n.createCommentVNode)("",!0)]),f,(0,n.createVNode)("div",p,[(0,n.createVNode)("label",v,[(0,n.withDirectives)((0,n.createVNode)("input",{class:"form-check-input",type:"checkbox",name:"remember","onUpdate:modelValue":r[3]||(r[3]=function(e){return y.rememberMe=e})},null,512),[[n.vModelCheckbox,y.rememberMe]]),b,h,x])]),$],32)])])}},z=S}}]);