(self.webpackChunk=self.webpackChunk||[]).push([[653],{653:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>oe});var n=r(5166),o={class:"delete Course"},a={class:"delete-buttons"},s={class:"courses header"},l={class:"heading"},c=(0,n.createVNode)("hr",null,null,-1),i={class:"navigation"},u=(0,n.createVNode)("br",null,null,-1),d=(0,n.createVNode)("br",null,null,-1),p=(0,n.createVNode)("br",null,null,-1),m=(0,n.createVNode)("br",null,null,-1),f=(0,n.createVNode)("label",{for:"sort"},"Sort By: ",-1),b=(0,n.createVNode)("option",{value:"0"},"Due Date",-1),g=(0,n.createVNode)("option",{value:"1"},"Name",-1),h=(0,n.createVNode)("option",{value:"2"},"Unsorted",-1),v={style:{border:"1px solid #9e9e9e !important",padding:"0 !important",width:"min-content !important",margin:"4rem 2rem 2rem 2rem !important"}},k={class:"table problemtable",style:{margin:"0 !important"}},x={class:"problemtable"},N=(0,n.createVNode)("th",null,[(0,n.createVNode)("i",{class:"fas fa-grin-alt spacer"})],-1),P=(0,n.createVNode)("th",null,"Title",-1),D=(0,n.createVNode)("th",null,"# Test Cases",-1),V={key:0},w=(0,n.createVNode)("th",null,"Due Date",-1),y={key:1},C=(0,n.createVNode)("i",{class:"fas fa-chevron-right"},null,-1),I=(0,n.createVNode)("i",{class:"fas fa-chevron-down"},null,-1),_={key:0},B={key:1},S={class:"description-data"},M={colspan:"5",class:"description-data"},U={class:"problem-description"},E={class:"row"},A={class:"col-11"},O={class:"right col-1"},T=(0,n.createVNode)("i",{class:"fas fa-edit"},null,-1),L=(0,n.createVNode)("i",{class:"fas fa-trash-alt"},null,-1),J=(0,n.createVNode)("br",null,null,-1),$=(0,n.createVNode)("br",null,null,-1),F=(0,n.createVNode)("br",null,null,-1),j={style:{width:"50% !important"}},Z={class:"row"},Y={class:"col-9"},H=(0,n.createVNode)("option",{value:"",selected:"",disabled:"",hidden:""}," Select a language... ",-1),R=(0,n.createVNode)("option",{value:"Java"},"Java",-1),q=(0,n.createVNode)("option",{value:"Python"},"Python",-1),z={class:"col-3 ml-1"},G=(0,n.createVNode)("td",{colspan:"5"},"Add Problem",-1);var K=r(7757),Q=r.n(K),W=r(6532),X=r(2813),ee=r(2119);function te(e,t,r,n,o,a,s){try{var l=e[a](s),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function re(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){te(a,n,o,s,l,"next",e)}function l(e){te(a,n,o,s,l,"throw",e)}s(void 0)}))}}const ne={props:["labID","labName"],emits:["unmounting","labEdited"],data:function(){return{problems:[],unfilteredProblems:[],childIsOpen:!1,problemID:null,expandedProblem:null,lang:"",progress:[],authUser:null,fscID:null,deletedMe:!1,username:"",sort:"1",showDeleteModal:!1,reloadDeleteModal:0,deletingProblem:{id:"",problem:{},key:""}}},setup:function(){var e=(0,ee.yj)();return{currentDirectory:(0,n.computed)((function(){return e.path}))}},methods:{convertDate:function(e){var t=e.split("-");console.log("\n\n\n"),console.log(t);var r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][Number(t[1])-1],n=Number(t[2].split(" ")[0]);return console.log(n),r+" "+n},addProblem:function(){var e=this;return re(Q().mark((function t(){var r,n,o,a,s,l,c;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new Date).setDate(r.getDate()+7),n=""+(r.getMonth()+1),o=""+r.getDate(),a=r.getFullYear(),n.length<2&&(n="0"+n),o.length<2&&(o="0"+o),s=[a,n,o].join("-"),l={name:"New Problem",description:JSON.stringify({ops:[{insert:"New Problem"}]}),lab_id:e.labID,due_date:s+" 23:59:59",copy_id:e.labID,java_starter:"public class Main{\n\tpublic static void main(String[] args){\n\t\t\n\t}\n}",python_starter:'def main():\n\t// Your code here\n\n\nif __name__ == "__main__":\n\tmain()'},t.next=9,W.x.post("/problems",l);case 9:c=t.sent,e.problemID=c.data.data.id,e.problems.push(c.data.data),e.childIsOpen=!0,e.$router.push({name:"EditAssignment",params:{problem_id:e.problemID}});case 14:case"end":return t.stop()}}),t)})))()},editProblem:function(e){this.childIsOpen=!0,this.problemID=e,this.$router.push({name:"EditAssignment",params:{problem_id:this.problemID}})},closeDeleting:function(){this.showDeleteModal=!1},deleting:function(e,t,r){this.showDeleteModal=!0,this.deletingProblem.id=e,this.deletingProblem.problem=t,this.deletingProblem.key=r},deleteProblem:function(){var e=this;return re(Q().mark((function t(){var r,n;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("deleting problem"),e.deletingProblem.id,r=e.deletingProblem.problem,n=e.deletingProblem.key,t.next=6,W.x.delete("/problems/".concat(r.id));case 6:t.sent,e.problems=e.problems.filter((function(e,t){return t!=n})),e.unfilteredProblems=e.unfilteredProblems.filter((function(e,t){return t!=n})),e.closeDeleting();case 10:case"end":return t.stop()}}),t)})))()},deleteMe:function(e){var t=this;return re(Q().mark((function r(){return Q().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:console.log("deleteMe "+e),t.deletedMe=!0,t.$router.push({name:"Problems",params:{lab_id:t.labID}});case 3:case"end":return r.stop()}}),r)})))()},goToProblem:function(e){console.log("go to problem"),this.childIsOpen=!0,this.problemID=e,this.$router.push({name:"Assignment",params:{problem_id:e}})},getProblems:function(){var e=this;return re(Q().mark((function t(){var r,n;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("gotToProblem"),t.next=4,W.x.get("/problems/".concat(e.labID));case 4:return r=t.sent,e.unfilteredProblems=r.data.data,t.next=8,e.getStudent();case 8:t.sent,t.next=13;break;case 11:t.prev=11,t.t0=t.catch(0);case 13:if(e.isProf){t.next=25;break}n=0;case 15:if(!(n<e.unfilteredProblems.length)){t.next=25;break}return t.next=18,e.getPercent(e.unfilteredProblems[n]);case 18:return e.unfilteredProblems[n].percent=t.sent,t.next=21,e.getActivity(e.unfilteredProblems[n]);case 21:e.unfilteredProblems[n].activity=t.sent;case 22:n++,t.next=15;break;case 25:return t.next=27,e.sortProblems();case 27:return t.next=29,e.getColors();case 29:case"end":return t.stop()}}),t,null,[[0,11]])})))()},getStudent:function(){var e=this;return re(Q().mark((function t(){var r;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.authUser=X.Z.getters["auth/authUser"],e.fscID=e.authUser.fsc_user.fsc_id,t.next=4,W.x.get("/progress/".concat(e.fscID));case 4:return r=t.sent,e.progress=r.data.data,t.abrupt("return",e.progress);case 7:case"end":return t.stop()}}),t)})))()},getPercent:function(e){var t=this;return re(Q().mark((function r(){var n,o,a;return Q().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:console.log("in percent"),n=JSON.parse(t.progress.assignments),console.log(n),a=0;case 4:if(!(a<n.length)){r.next=11;break}if(n[a].assignment_id!=e.id){r.next=8;break}return o=n[a],r.abrupt("break",11);case 8:a++,r.next=4;break;case 11:if(console.log(o),0!=e.test_cases){r.next=16;break}return r.abrupt("return","0%");case 16:if(o){r.next=20;break}return r.abrupt("return","0%");case 20:return console.log(parseInt(o.cases_passed/e.test_cases*100)+"%"),r.abrupt("return",parseInt(o.cases_passed/e.test_cases*100)+"%");case 22:case"end":return r.stop()}}),r)})))()},getActivity:function(e){var t=this;return re(Q().mark((function r(){var n,o;return Q().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=JSON.parse(t.progress.assignments),o=0;case 2:if(!(o<n.length)){r.next=8;break}if(n[o].assignment_id!=e.id){r.next=5;break}return r.abrupt("return",n[o].last_progress);case 5:o++,r.next=2;break;case 8:case"end":return r.stop()}}),r)})))()},getColors:function(){var e=this;return re(Q().mark((function t(){var r,n;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=0;r<e.unfilteredProblems.length;r++)console.log(e.unfilteredProblems[r].id+" "+e.unfilteredProblems[r].percent),"100%"==e.unfilteredProblems[r].percent?(console.log("green background"),n=document.getElementById("p"+e.unfilteredProblems[r].id),console.log("element: "),console.log(n),null!=n?n.classList.add("complete"):console.log("element is null")):"0%"!=e.unfilteredProblems[r].percent?(console.log("red background"),null!=(n=document.getElementById("p"+e.unfilteredProblems[r].id))?n.classList.add("incomplete"):console.log("element is null")):console.log("blank color background");case 1:case"end":return t.stop()}}),t)})))()},problemEdited:function(){var e=this;return re(Q().mark((function t(){var r;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.problemID,!e.deletedMe){t.next=7;break}return console.log("inside the problem edited deletedMe"),t.next=5,W.x.delete("/problems/".concat(r));case 5:t.sent,e.problems=e.problems.filter((function(e){return e.id!=r}));case 7:return t.next=9,e.getColors();case 9:return t.next=11,e.Unmounting();case 11:case"end":return t.stop()}}),t)})))()},Unmounting:function(){var e=this;return re(Q().mark((function t(){var r,n,o;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.unfilteredProblems=e.unfilteredProblems.filter((function(t){return t.id!=e.problemID})),e.deletedMe){t.next=12;break}return t.next=4,W.x.get("/problems/full/".concat(e.problemID));case 4:return r=t.sent,t.next=7,e.getPercent(r.data.data);case 7:return r.data.data.percent=t.sent,t.next=10,e.getActivity(r.data.data);case 10:r.data.data.activity=t.sent,e.unfilteredProblems.push(r.data.data);case 12:return t.next=14,W.x.get("/progress/".concat(e.fscID));case 14:return n=t.sent,e.progress=n.data.data,e.expandedProblem=null,t.next=19,e.sortProblems();case 19:return e.childIsOpen=!1,e.problemID=null,o=e.refreshPage(),console.log("unmounting workspace page"),console.log(o),o&&e.$router.push({name:"Problems",params:{lab_id:e.labID}}),t.next=27,e.getColors();case 27:case"end":return t.stop()}}),t)})))()},isExpanded:function(e){return this.expandedProblem==e},toggleExpansion:function(e){this.isExpanded(e)?(this.lang="",this.expandedProblem=null):this.expandedProblem=e},filterByPublish:function(){var e=this;return re(Q().mark((function t(){var r,n;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("filter by publish"),e.problems=[],e.isProf)for(console.log("professor"),n=0;n<e.unfilteredProblems.length;n++)e.problems.push(e.unfilteredProblems[n]);else for(console.log("student"),r=0;r<e.unfilteredProblems.length;r++)e.unfilteredProblems[r].isPublished&&e.unfilteredProblems[r].test_cases>0&&e.problems.push(e.unfilteredProblems[r]);return t.abrupt("return","Hi");case 4:case"end":return t.stop()}}),t)})))()},sortProblems:function(){var e=this;return re(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=e.sort){t.next=5;break}return t.next=3,e.sortByDueDate();case 3:t.next=12;break;case 5:if(1!=e.sort){t.next=10;break}return t.next=8,e.sortByName();case 8:t.next=12;break;case 10:return t.next=12,e.sortByID();case 12:return t.next=14,e.filterByPublish();case 14:return t.abrupt("return","");case 15:case"end":return t.stop()}}),t)})))()},sortByDueDate:function(){var e=this;return re(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.unfilteredProblems.sort((function(e,t){var r=e.due_date.split("-"),n=t.due_date.split("-"),o=Date.UTC(r[0],r[1]-1,r[2],0,0,0,0),a=Date.UTC(n[0],n[1]-1,n[2],0,0,0,0);return o<a?-1:o>a?1:0}));case 1:case"end":return t.stop()}}),t)})))()},sortByName:function(){var e=this;return re(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.unfilteredProblems.sort((function(e,t){var r=e.name.toLowerCase(),n=t.name.toLowerCase();return r<n?-1:r>n?1:0}));case 1:case"end":return t.stop()}}),t)})))()},sortByID:function(){var e=this;return re(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.unfilteredProblems.sort((function(e,t){return e.id-t.id}));case 1:case"end":return t.stop()}}),t)})))()},refreshPage:function(){if(""==(e=window.location.pathname.substring("/courses".length)))return console.log("just on the courses page"),!1;console.log("on this page: "+e);var e;(e=e.split("/"))[1],e[2];return!0}},computed:{isProf:function(){return null!=X.Z.getters["auth/isProf"]&&X.Z.getters["auth/isProf"]}},watch:{showDeleteModal:function(){this.showDeleteModal||this.reloadDeleteModal++}},beforeMount:function(){var e=this;return re(Q().mark((function t(){var r;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("BeforeMount"),e.childIsOpen=!1,t.next=4,e.getProblems().then(e.getColors());case 4:console.log("\n\nBefore date convert"),console.log(e.problems),r=0;case 7:if(!(r<e.problems.length)){t.next=14;break}return t.next=10,e.convertDate(e.problems[r].due_date);case 10:e.problems[r].due_date=t.sent;case 11:r++,t.next=7;break;case 14:console.log("\n\nAfter date convert"),console.log(e.problems);case 16:case"end":return t.stop()}}),t)})))()},beforeUnmount:function(){console.log("BeforeUnmount"),this.$emit("unmounting")},mounted:function(){var e=this;return re(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Mounted"),t.next=3,X.Z.getters["auth/authUser"];case 3:return e.authUser=t.sent,e.username=e.authUser.username,t.next=7,e.getColors();case 7:case"end":return t.stop()}}),t)})))()},render:function(e,t,r,K,Q,W){var X=this,ee=(0,n.resolveComponent)("vue-final-modal"),te=(0,n.resolveComponent)("router-view");return(0,n.openBlock)(),(0,n.createBlock)(n.Fragment,null,[(0,n.withDirectives)((0,n.createVNode)("div",null,[(0,n.createVNode)(ee,{modelValue:Q.showDeleteModal,"onUpdate:modelValue":t[4]||(t[4]=function(e){return Q.showDeleteModal=e}),classes:"modal-container","content-class":"modal-content delete-modal","esc-to-close":!0},{default:(0,n.withCtx)((function(){return[(0,n.createVNode)("button",{class:"modal-close",onClick:t[1]||(t[1]=function(e){return W.closeDeleting()})},"x"),(0,n.createVNode)("div",o,[(0,n.createVNode)("p",null," Are you sure you would like to delete "+(0,n.toDisplayString)(Q.deletingProblem.problem.name)+" from this Lab ",1),(0,n.createVNode)("div",a,[(0,n.createVNode)("button",{class:"btn btn-md btn-danger delete-button",onClick:t[2]||(t[2]=function(e){return W.closeDeleting()})}," Cancel "),(0,n.createVNode)("button",{class:"btn btn-md btn-danger delete-button",onClick:t[3]||(t[3]=function(e){return W.deleteProblem()})}," Delete ")])])]})),_:1},8,["modelValue"]),(0,n.createVNode)("div",s,[(0,n.createVNode)("div",l,[(0,n.createVNode)("h2",null,(0,n.toDisplayString)(this.labName),1),c])]),(0,n.createVNode)("small",i,[(0,n.createVNode)("span",null,(0,n.toDisplayString)(Q.username)+(0,n.toDisplayString)(K.currentDirectory),1),u,(0,n.createVNode)("span",{class:"pointer underline",onClick:t[5]||(t[5]=function(e){return X.$emit("unmounting")})},"↩ Return to Labs")]),d,p,m,f,(0,n.withDirectives)((0,n.createVNode)("select",{id:"sort","onUpdate:modelValue":t[6]||(t[6]=function(e){return Q.sort=e}),onChange:t[7]||(t[7]=function(){return W.sortProblems&&W.sortProblems.apply(W,arguments)})},[b,g,h],544),[[n.vModelSelect,Q.sort]]),(0,n.createVNode)("div",v,[(0,n.createVNode)("table",k,[(0,n.createVNode)("thead",x,[(0,n.createVNode)("tr",null,[N,P,D,W.isProf?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createBlock)("th",V,"% Successful")),w,W.isProf?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createBlock)("th",y,"Last Activity"))])]),(0,n.createVNode)("tbody",null,[((0,n.openBlock)(!0),(0,n.createBlock)(n.Fragment,null,(0,n.renderList)(Q.problems,(function(e,r){return(0,n.openBlock)(),(0,n.createBlock)(n.Fragment,{key:e.id},[(0,n.createVNode)("tr",{class:"problem pointer",id:"p"+e.id,onClick:function(t){return W.toggleExpansion(e.id)}},[(0,n.withDirectives)((0,n.createVNode)("td",null,[C],512),[[n.vShow,!W.isExpanded(e.id)]]),(0,n.withDirectives)((0,n.createVNode)("td",null,[I],512),[[n.vShow,W.isExpanded(e.id)]]),(0,n.createVNode)("td",null,(0,n.toDisplayString)(e.name),1),(0,n.createVNode)("td",null,(0,n.toDisplayString)(e.test_cases),1),W.isProf?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createBlock)("td",_,(0,n.toDisplayString)(e.percent),1)),(0,n.createVNode)("td",null,(0,n.toDisplayString)(e.due_date.split(" ")[0])+" "+(0,n.toDisplayString)(e.due_date.split(" ")[1]),1),W.isProf?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createBlock)("td",B,(0,n.toDisplayString)(e.activity),1))],8,["id","onClick"]),(0,n.withDirectives)((0,n.createVNode)("tr",S,[(0,n.createVNode)("td",M,[(0,n.createVNode)("div",U,[(0,n.createVNode)("div",E,[(0,n.createVNode)("h4",A,[(0,n.createVNode)("b",null,(0,n.toDisplayString)(e.name),1)]),(0,n.createVNode)("div",O,[W.isProf?((0,n.openBlock)(),(0,n.createBlock)("a",{key:0,onClick:function(t){return W.editProblem(e.id)},class:"courselaunch text-danger mx-2 my-1 no-decor pointer"},[T],8,["onClick"])):(0,n.createCommentVNode)("",!0),W.isProf?((0,n.openBlock)(),(0,n.createBlock)("a",{key:1,onClick:function(t){return W.deleting(e.id,e,r)},class:"courselaunch text-danger mx-2 my-1 no-decor pointer"},[L],8,["onClick"])):(0,n.createCommentVNode)("",!0)])]),(0,n.createVNode)("p",null,[J,(0,n.createTextVNode)(" Due Date: "+(0,n.toDisplayString)(e.due_date.split(" ")[0])+" ",1),$,(0,n.createTextVNode)(" Test Cases: "+(0,n.toDisplayString)(e.test_cases)+" ",1),F]),(0,n.createVNode)("div",j,[(0,n.createVNode)("div",Z,[(0,n.createVNode)("div",Y,[(0,n.withDirectives)((0,n.createVNode)("select",{"onUpdate:modelValue":t[8]||(t[8]=function(e){return Q.lang=e}),id:"lang",class:"form-select"},[H,R,q],512),[[n.vModelSelect,Q.lang]])]),(0,n.createVNode)("div",z,[(0,n.createVNode)("button",{type:"launch",name:"launch",class:"launch-workspace btn btn-success",disabled:!Q.lang.length,onClick:function(t){return W.goToProblem(e.id)}}," Launch in "+(0,n.toDisplayString)(Q.lang),9,["disabled","onClick"])])])])])])],512),[[n.vShow,W.isExpanded(e.id)]])],64)})),128)),W.isProf?((0,n.openBlock)(),(0,n.createBlock)("tr",{key:0,class:"lab pointer",onClick:t[9]||(t[9]=function(){return W.addProblem&&W.addProblem.apply(W,arguments)})},[G])):(0,n.createCommentVNode)("",!0)])])])],512),[[n.vShow,!Q.childIsOpen]]),Q.childIsOpen?((0,n.openBlock)(),(0,n.createBlock)(te,{key:0,onUnmounting:t[10]||(t[10]=function(e){return W.Unmounting()}),onProblemEdited:t[11]||(t[11]=function(e){return W.problemEdited()}),onDeleteMe:t[12]||(t[12]=function(e){return W.deleteMe()}),problemID:Q.problemID,lang:Q.lang,labID:r.labID},null,8,["problemID","lang","labID"])):(0,n.createCommentVNode)("",!0)],64)}},oe=ne}}]);