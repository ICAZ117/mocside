(self.webpackChunk=self.webpackChunk||[]).push([[362],{3362:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>P});var t=s(5166),o={key:0},n=(0,t.createVNode)("div",{class:"courses header"},[(0,t.createVNode)("div",{class:"heading"},[(0,t.createVNode)("h2",null,"My Courses"),(0,t.createVNode)("hr")])],-1),c={class:"navigation"},u=(0,t.createVNode)("br",null,null,-1),i={class:"coursecontainer"},a={class:"courserow row my-5"},l={id:"menu"},d={class:"menu-item"},h={class:"menu-item"},f={class:"width col-xl-3 col-lg-4 col-md-6 col-sm-12 col-xs-12"},p={class:"card coursecard w-100"},m={class:"courses card-content"},v={class:"card-title my-3 mx-2 mb-0"},g=(0,t.createVNode)("hr",{class:"courses my-0"},null,-1),C={key:0,class:"add-course fixed-course-width"},k=(0,t.createVNode)("div",{class:"width col-xl-3 col-lg-4 col-md-6 col-sm-12 col-xs-12"},[(0,t.createVNode)("div",{class:"card coursecard w-100",style:{"background-color":"transparent !important"}},[(0,t.createVNode)("div",{class:"courses card-img-add"})])],-1),w={key:1},N=(0,t.createVNode)("h1",null,"No Registered Courses",-1);var y=s(7757),I=s.n(y),x=s(2813),V=s(6532),D=s(2119);function b(e,r,s,t,o,n,c){try{var u=e[n](c),i=u.value}catch(e){return void s(e)}u.done?r(i):Promise.resolve(i).then(t,o)}function B(e){return function(){var r=this,s=arguments;return new Promise((function(t,o){var n=e.apply(r,s);function c(e){b(n,t,o,c,u,"next",e)}function u(e){b(n,t,o,c,u,"throw",e)}c(void 0)}))}}const E={data:function(){return{authUser:null,enrolledCourses:[],courses:[],childIsOpen:!1,courseID:null,username:"",rightClickID:""}},setup:function(){var e=(0,D.yj)();return{currentDirectory:(0,t.computed)((function(){return e.path}))}},methods:{showMenu:function(e){if(this.isProf){this.rightClickID=String(e);var r=document.getElementById(this.rightClickID).childNodes[0],s=document.getElementById("out-click");r.style.top="".concat(window.event.clientY,"px"),r.style.left="".concat(window.event.clientX,"px"),r.classList.add("show"),s.style.display="block"}},closeMenu:function(){try{document.getElementById(this.rightClickID).childNodes[0].classList.remove("show")}catch(e){}document.getElementById("out-click").style.display="none",this.rightClickID=""},addCourse:function(){var e=this;return B(I().mark((function r(){var s,t;return I().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s={name:"New Course",description:"New Course",owner_id:e.authUser.fsc_user.fsc_id},r.next=3,V.x.post("/courses",s);case 3:t=r.sent,e.courseID=t.data.id,e.enrolledCourses.push(e.courseID),e.addProfessor(),e.childIsOpen=!0,e.courses.push(t.data),e.$router.push({name:"EditCourse",params:{course_id:e.courseID}});case 10:case"end":return r.stop()}}),r)})))()},addProfessor:function(){var e=this;return B(I().mark((function r(){var s,t;return I().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s={courses:JSON.stringify({courses:e.enrolledCourses})},r.next=3,V.x.put("/professors/".concat(e.authUser.fsc_user.fsc_id),s);case 3:return t=r.sent,r.abrupt("return",t);case 5:case"end":return r.stop()}}),r)})))()},editCourse:function(e){this.childIsOpen=!0,this.courseID=e,this.$router.push({name:"EditCourse",params:{course_id:this.courseID}})},deleteCourse:function(e,r,s){var t=this;return B(I().mark((function o(){var n,c,u;return I().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!confirm("Are you Sure you want to delete "+r.name)){o.next=18;break}return t.childIsOpen=!1,document.getElementById("out-click").style.display="none",o.next=6,V.x.delete("/courses/".concat(e));case 6:for(n=o.sent,console.log(n),console.log("delete Course: "+e),u=null,c=0;c<=t.enrolledCourses.length;c++)t.enrolledCourses[c]==e&&(u=c);t.enrolledCourses.splice(u,1),t.addProfessor(),delete t.courses.course,t.courseID=null,t.courses=t.courses.filter((function(e,r){return r!=s})),o.next=19;break;case 18:console.log("Delete avoided");case 19:case"end":return o.stop()}}),o)})))()},goToLabs:function(e){""==this.rightClickID&&(this.childIsOpen=!0,this.courseID=e,this.$router.push({name:"Labs",params:{course_id:this.courseID}}))},getCourses:function(){var e=this;return B(I().mark((function r(){var s,t,o;return I().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.courses=[],s=0;case 2:if(!(s<e.enrolledCourses.length)){r.next=11;break}return t=e.enrolledCourses[s],r.next=6,V.x.get("/courses/".concat(t));case 6:o=r.sent,e.courses.push(o.data.data);case 8:s++,r.next=2;break;case 11:case"end":return r.stop()}}),r)})))()},Unmounting:function(){this.childIsOpen=!1,this.courseID=null,this.$router.push({name:"Courses"})},courseEdited:function(){var e=this;return B(I().mark((function r(){var s;return I().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.courses=e.courses.filter((function(r){return r.id!=e.courseID})),r.next=3,V.x.get("/courses/".concat(e.courseID));case 3:s=r.sent,e.courses.push(s.data.data),e.Unmounting();case 6:case"end":return r.stop()}}),r)})))()},hasLabAccess:function(e){for(var r=0;r<this.enrolledCourses.length;r++)if(this.enrolledCourses[r]==e)return!0;return!1},hasEditAccess:function(e){return!!this.isProf&&this.hasLabAccess(e)},routeToChild:function(){if(""==(e=window.location.pathname.substring("/courses".length)))console.log("just on the courses page");else{console.log("on this page: "+e);var e,r=(e=e.split("/"))[1],s=e[2];"labs"==s?this.hasLabAccess(r)&&this.goToLabs(r):"edit"==s?this.hasEditAccess(r)&&this.editCourse(r):console.log(s)}}},computed:{isProf:function(){return null!=x.Z.getters["auth/isProf"]&&x.Z.getters["auth/isProf"]}},mounted:function(){var e=this;return B(I().mark((function r(){return I().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.childIsOpen=!1,r.next=3,x.Z.getters["auth/authUser"];case 3:e.authUser=r.sent,e.username=e.authUser.username,console.log(e.authUser),e.authUser.fsc_user.courses&&(e.enrolledCourses=JSON.parse(e.authUser.fsc_user.courses).courses),e.getCourses(),e.routeToChild();case 9:case"end":return r.stop()}}),r)})))()},render:function(e,r,s,y,I,x){var V=(0,t.resolveComponent)("router-view");return(0,t.openBlock)(),(0,t.createBlock)(t.Fragment,null,[(0,t.createVNode)("div",null,[I.childIsOpen?(0,t.createCommentVNode)("",!0):((0,t.openBlock)(),(0,t.createBlock)("div",o,[n,(0,t.createVNode)("small",c,[(0,t.createVNode)("span",null,(0,t.toDisplayString)(I.username)+(0,t.toDisplayString)(y.currentDirectory),1)]),u,(0,t.createVNode)("div",i,[(0,t.createVNode)("div",a,[((0,t.openBlock)(!0),(0,t.createBlock)(t.Fragment,null,(0,t.renderList)(I.courses,(function(e,r){return(0,t.openBlock)(),(0,t.createBlock)("div",{class:"fixed-course-width",key:e.id,course:e},[(0,t.createVNode)("span",{id:e.id,onContextmenu:(0,t.withModifiers)((function(r){return x.showMenu(e.id)}),["prevent"]),onClick:(0,t.withModifiers)((function(r){return x.goToLabs(e.id)}),["prevent"]),class:"no-decor pointer"},[(0,t.createVNode)("ul",l,[(0,t.createVNode)("li",d,[(0,t.withDirectives)((0,t.createVNode)("a",{class:"pointer no-decor",onClick:function(r){return x.editCourse(e.id)}},"Edit",8,["onClick"]),[[t.vShow,x.isProf]])]),(0,t.createVNode)("li",h,[(0,t.withDirectives)((0,t.createVNode)("a",{class:"pointer no-decor",onClick:function(s){return x.deleteCourse(e.id,e,r)}},"Delete",8,["onClick"]),[[t.vShow,x.isProf]])])]),(0,t.createVNode)("div",f,[(0,t.createVNode)("div",p,[(0,t.createVNode)("div",{class:"courses card-img-top",style:{backgroundImage:"url(".concat(e.img_loc,")")}},null,4),(0,t.createVNode)("div",m,[(0,t.createVNode)("h6",v,(0,t.toDisplayString)(e.name),1),g])])])],40,["id","onContextmenu","onClick"])],8,["course"])})),128)),x.isProf?((0,t.openBlock)(),(0,t.createBlock)("div",C,[(0,t.createVNode)("a",{onClick:r[1]||(r[1]=function(e){return x.addCourse()}),class:"no-decor pointer"},[k])])):(0,t.createCommentVNode)("",!0),0==I.courses.length?((0,t.openBlock)(),(0,t.createBlock)("div",w,[N])):(0,t.createCommentVNode)("",!0)])])])),I.childIsOpen?((0,t.openBlock)(),(0,t.createBlock)(V,{key:1,onUnmounting:r[2]||(r[2]=function(e){return x.Unmounting()}),onCourseEdited:x.courseEdited,courseID:I.courseID},null,8,["onCourseEdited","courseID"])):(0,t.createCommentVNode)("",!0)]),(0,t.createVNode)("div",{id:"out-click",onClick:r[3]||(r[3]=function(){return x.closeMenu&&x.closeMenu.apply(x,arguments)})})],64)}},P=E}}]);